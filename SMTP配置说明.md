# SMTP邮件服务配置说明

## 为什么需要配置SMTP？

应用需要发送邮箱验证码来确保：
1. **账户唯一性** - 一个邮箱只能注册一个账户
2. **账户安全** - 通过邮箱验证确认是真实用户
3. **密码重置** - 忘记密码时可以通过邮箱重置

## 配置步骤

### 方法一：使用配置文件（推荐）

1. **复制配置文件模板**
   ```bash
   cp smtp-config.example.json smtp-config.json
   ```

2. **获取126邮箱SMTP授权码**
   - 登录 [126邮箱](https://mail.126.com)
   - 点击右上角 **设置** → **POP3/SMTP/IMAP**
   - 找到 **SMTP服务**，点击 **开启**
   - 按照提示验证手机号
   - 系统会生成一个 **授权码**（类似：`abcd1234efgh5678`）
   - ⚠️ **授权码不是邮箱密码**，是专门用于第三方应用的密码

3. **编辑配置文件**
   
   打开 `smtp-config.json`，填入授权码：
   ```json
   {
     "host": "smtp.126.com",
     "port": 465,
     "user": "o_oangela@126.com",
     "pass": "你的授权码"
   }
   ```

4. **重新构建应用**
   ```bash
   npm run build:win
   # 或
   npm run build:mac
   ```

### 方法二：使用环境变量

在构建前设置环境变量：

**Windows (PowerShell):**
```powershell
$env:SMTP_AUTH_CODE="你的授权码"
npm run build:win
```

**macOS/Linux:**
```bash
export SMTP_AUTH_CODE="你的授权码"
npm run build:mac
```

## 验证配置

启动应用后，尝试注册新用户：
1. 输入邮箱和密码
2. 点击"发送验证码"
3. 检查邮箱是否收到验证码邮件
4. 如果收到，说明配置成功 ✅

## 常见问题

### Q: 提示"邮件服务未配置"
**A:** 说明授权码未设置或为空，请按上述步骤配置

### Q: 提示"SMTP授权码无效"
**A:** 授权码错误，请重新获取授权码并检查是否复制完整

### Q: 提示"connect ECONNREFUSED"
**A:** 网络连接问题，检查：
   - 是否能访问126邮箱网站
   - 防火墙是否阻止了465端口
   - 是否使用了代理

### Q: 邮件发送很慢
**A:** 正常现象，SMTP发送通常需要2-5秒

### Q: 收不到邮件
**A:** 检查：
   - 垃圾邮件文件夹
   - 邮箱地址是否正确
   - 126邮箱的发件箱是否有发送记录

## 安全提示

⚠️ **重要：**
- `smtp-config.json` 已加入 `.gitignore`，不会上传到GitHub
- 不要将授权码分享给他人
- 不要在公开场合展示授权码
- 定期更换授权码以提高安全性

## 技术支持

如有问题，请联系：o_oangela@126.com
