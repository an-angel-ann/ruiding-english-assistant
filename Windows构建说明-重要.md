# Windowsç‰ˆæœ¬æ„å»ºè¯´æ˜ - é‡è¦

## ğŸ”´ æ ¸å¿ƒé—®é¢˜

**åœ¨Macä¸Šæ— æ³•æ„å»ºçœŸæ­£å¯ç”¨çš„Windowsç‰ˆæœ¬ï¼**

### ä¸ºä»€ä¹ˆï¼Ÿ

1. **Nativeæ¨¡å—é—®é¢˜**
   - `better-sqlite3` æ˜¯ä¸€ä¸ªnative Node.jsæ¨¡å—
   - å®ƒåŒ…å«C++ä»£ç ï¼Œéœ€è¦é’ˆå¯¹ç‰¹å®šå¹³å°ç¼–è¯‘
   - Macç¼–è¯‘å‡ºæ¥çš„æ˜¯ `.node` æ–‡ä»¶ï¼ˆMach-Oæ ¼å¼ï¼‰
   - Windowséœ€è¦çš„æ˜¯ `.node` æ–‡ä»¶ï¼ˆPEæ ¼å¼ï¼‰
   - **è¿™ä¸¤è€…å®Œå…¨ä¸å…¼å®¹ï¼**

2. **äº¤å‰ç¼–è¯‘çš„é™åˆ¶**
   - ç†è®ºä¸Šå¯ä»¥äº¤å‰ç¼–è¯‘ï¼Œä½†éœ€è¦ï¼š
     - Windows SDK
     - Visual Studio Build Tools
     - æ­£ç¡®çš„å·¥å…·é“¾é…ç½®
   - åœ¨Macä¸Šé…ç½®è¿™äº›éå¸¸å¤æ‚ä¸”ä¸å¯é 

3. **npmé¢„ç¼–è¯‘ç‰ˆæœ¬çš„é—®é¢˜**
   - npmå¯ä»¥ä¸‹è½½é¢„ç¼–è¯‘çš„Windowsç‰ˆæœ¬
   - ä½†æ˜¯é’ˆå¯¹çš„æ˜¯Node.jsï¼Œä¸æ˜¯Electron
   - Electronçš„ABIä¸Node.jsä¸åŒ
   - æ‰€ä»¥é¢„ç¼–è¯‘ç‰ˆæœ¬ä¹Ÿæ— æ³•ä½¿ç”¨

## âœ… æ­£ç¡®çš„è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: åœ¨Windowsç³»ç»Ÿä¸Šæ„å»ºï¼ˆæ¨èï¼‰

è¿™æ˜¯**å”¯ä¸€å¯é **çš„æ–¹æ³•ï¼š

```cmd
# åœ¨Windowsç”µè„‘ä¸Šæ‰§è¡Œ
git clone https://github.com/an-angel-ann/ruiding-english-assistant
cd ruiding-english-assistant
npm install
cd backend
npm install
cd ..
npm run build:win
```

ç”Ÿæˆçš„æ–‡ä»¶ï¼š
- `dist/ç¿å®AIè‹±è¯­å­¦ä¹ åŠ©æ‰‹-v3.2.0-x64.exe` - å®‰è£…ç¨‹åº
- `dist/ç¿å®AIè‹±è¯­å­¦ä¹ åŠ©æ‰‹-v3.2.0-portable.exe` - ä¾¿æºç‰ˆ

### æ–¹æ¡ˆ2: ä½¿ç”¨GitHub Actionsï¼ˆå·²é…ç½®ï¼‰

GitHub Actionsåœ¨çœŸå®çš„Windowsç¯å¢ƒä¸­æ„å»ºï¼š

1. è®¿é—®ï¼šhttps://github.com/an-angel-ann/ruiding-english-assistant/actions
2. ç‚¹å‡»"Build All Platforms"
3. ç‚¹å‡»"Run workflow"
4. ç­‰å¾…æ„å»ºå®Œæˆ
5. ä¸‹è½½Artifacts

**ä½†æ˜¯**ï¼Œä¹‹å‰GitHub Actionsæ„å»ºçš„ç‰ˆæœ¬ä¹Ÿæ— æ³•è¿è¡Œï¼Œå¯èƒ½çš„åŸå› ï¼š
- GitHub Actionsçš„Windowsç¯å¢ƒé…ç½®é—®é¢˜
- ä¾èµ–å®‰è£…ä¸å®Œæ•´
- è·¯å¾„é—®é¢˜

### æ–¹æ¡ˆ3: ä½¿ç”¨Windowsè™šæ‹Ÿæœº

å¦‚æœæ²¡æœ‰Windowsç”µè„‘ï¼š
1. å®‰è£…Parallels/VMware/VirtualBox
2. åˆ›å»ºWindows 10/11è™šæ‹Ÿæœº
3. åœ¨è™šæ‹Ÿæœºä¸­æ„å»º

## ğŸ” ä¸ºä»€ä¹ˆGitHub Actionsæ„å»ºçš„ç‰ˆæœ¬ä¸èƒ½ç”¨ï¼Ÿ

å¯èƒ½çš„åŸå› ï¼š

### 1. ä¾èµ–ç¼ºå¤±
è™½ç„¶æˆ‘ä»¬é…ç½®äº†åŒ…å«æ‰€æœ‰ä¾èµ–ï¼Œä½†å¯èƒ½ï¼š
- æŸäº›ä¾èµ–æ²¡æœ‰è¢«æ­£ç¡®æ‰“åŒ…
- è·¯å¾„é…ç½®ä¸æ­£ç¡®
- æƒé™é—®é¢˜

### 2. better-sqlite3ç¼–è¯‘é—®é¢˜
- GitHub Actionså¯èƒ½æ²¡æœ‰æ­£ç¡®ç¼–è¯‘
- æˆ–è€…ç¼–è¯‘çš„ç‰ˆæœ¬ä¸Electronä¸å…¼å®¹

### 3. åº”ç”¨å¯åŠ¨æµç¨‹é—®é¢˜
- åç«¯æœåŠ¡å™¨æ— æ³•å¯åŠ¨
- å‰ç«¯æœåŠ¡å™¨æ— æ³•å¯åŠ¨
- çª—å£åˆ›å»ºå¤±è´¥

## ğŸ¯ å»ºè®®çš„è°ƒè¯•æ­¥éª¤

### åœ¨Windowsä¸Šè°ƒè¯•

1. **ä¸‹è½½GitHub Actionsçš„Artifacts**
2. **è§£å‹å¹¶å®‰è£…**
3. **ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦**
4. **è¿è¡Œåº”ç”¨å¹¶æŸ¥çœ‹é”™è¯¯**ï¼š

```cmd
cd "C:\Program Files\ç¿å®AIè‹±è¯­å­¦ä¹ åŠ©æ‰‹"
"ç¿å®AIè‹±è¯­å­¦ä¹ åŠ©æ‰‹.exe" --dev > debug.log 2>&1
```

5. **æŸ¥çœ‹debug.logæ–‡ä»¶**ï¼Œæ‰¾åˆ°å…·ä½“é”™è¯¯

### æ£€æŸ¥å®‰è£…ç›®å½•

```cmd
cd "C:\Program Files\ç¿å®AIè‹±è¯­å­¦ä¹ åŠ©æ‰‹\resources"
dir
dir backend
dir backend\node_modules
dir backend\node_modules\better-sqlite3
dir backend\node_modules\express
```

ç¡®è®¤æ‰€æœ‰ä¾èµ–éƒ½å­˜åœ¨ã€‚

### æ£€æŸ¥better_sqlite3.node

```cmd
dir /s better_sqlite3.node
```

ç¡®è®¤æ–‡ä»¶å­˜åœ¨ä¸”å¤§å°åˆç†ï¼ˆåº”è¯¥å‡ ç™¾KBï¼‰ã€‚

## ğŸ’¡ ä¸´æ—¶è§£å†³æ–¹æ¡ˆ

### ä½¿ç”¨å¼€å‘æ¨¡å¼

å¦‚æœæœ‰Windowsç”µè„‘ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œå¼€å‘ç‰ˆæœ¬ï¼š

```cmd
git clone https://github.com/an-angel-ann/ruiding-english-assistant
cd ruiding-english-assistant
npm install
cd backend
npm install
cd ..
npm start
```

è¿™æ ·å¯ä»¥ç«‹å³ä½¿ç”¨ï¼Œä¸éœ€è¦æ‰“åŒ…ã€‚

### ä½¿ç”¨macOSç‰ˆæœ¬

å¦‚æœä½ æœ‰Macç”µè„‘ï¼ŒmacOSç‰ˆæœ¬æ˜¯å®Œå…¨å¯ç”¨çš„ï¼š
- ç¿å®AIè‹±è¯­å­¦ä¹ åŠ©æ‰‹-3.2.0-arm64.dmg (MèŠ¯ç‰‡)
- ç¿å®AIè‹±è¯­å­¦ä¹ åŠ©æ‰‹-3.2.0.dmg (Intel)

## ğŸ“Š æŠ€æœ¯ç»†èŠ‚

### Electronåº”ç”¨çš„ç»“æ„

```
åº”ç”¨ç›®å½•/
â”œâ”€â”€ åº”ç”¨.exe (Electronä¸»ç¨‹åº)
â”œâ”€â”€ resources/
â”‚   â”œâ”€â”€ app.asar (æ‰“åŒ…çš„åº”ç”¨ä»£ç )
â”‚   â”œâ”€â”€ app.asar.unpacked/ (éœ€è¦è§£åŒ…çš„æ–‡ä»¶)
â”‚   â”‚   â””â”€â”€ frontend/ (å‰ç«¯æ–‡ä»¶)
â”‚   â””â”€â”€ backend/ (åç«¯ä»£ç å’Œä¾èµ–)
â”‚       â”œâ”€â”€ server.js
â”‚       â”œâ”€â”€ package.json
â”‚       â””â”€â”€ node_modules/
â”‚           â”œâ”€â”€ express/
â”‚           â”œâ”€â”€ better-sqlite3/
â”‚           â”‚   â””â”€â”€ build/Release/better_sqlite3.node â† å…³é”®æ–‡ä»¶
â”‚           â””â”€â”€ ...
```

### better_sqlite3.nodeçš„è¦æ±‚

- **å¿…é¡»æ˜¯Windows PEæ ¼å¼**
- **å¿…é¡»é’ˆå¯¹Electron 28.3.3ç¼–è¯‘**
- **å¿…é¡»æ˜¯x64æ¶æ„**
- **å¿…é¡»åœ¨Windowsç³»ç»Ÿä¸Šç¼–è¯‘**

## ğŸš« ä¸å¯è¡Œçš„æ–¹æ¡ˆ

1. âŒ åœ¨Macä¸Šäº¤å‰ç¼–è¯‘Windowsç‰ˆæœ¬
2. âŒ ä½¿ç”¨npmçš„é¢„ç¼–è¯‘ç‰ˆæœ¬
3. âŒ æ‰‹åŠ¨å¤åˆ¶Windowsçš„.nodeæ–‡ä»¶ï¼ˆABIä¸åŒ¹é…ï¼‰
4. âŒ ä½¿ç”¨Wineè¿è¡ŒWindowsæ„å»ºå·¥å…·ï¼ˆä¸å¯é ï¼‰

## âœ… å¯è¡Œçš„æ–¹æ¡ˆ

1. âœ… åœ¨çœŸå®Windowsç³»ç»Ÿä¸Šæ„å»º
2. âœ… ä½¿ç”¨Windowsè™šæ‹Ÿæœºæ„å»º
3. âœ… ä½¿ç”¨GitHub Actionsï¼ˆéœ€è¦è°ƒè¯•ï¼‰
4. âœ… ä½¿ç”¨äº‘ç«¯WindowsæœåŠ¡å™¨

## ğŸ“ éœ€è¦çš„å¸®åŠ©

å¦‚æœä½ èƒ½æä¾›ï¼š

1. **Windowsç”µè„‘è®¿é—®æƒé™**
   - å¯ä»¥è¿œç¨‹æ¡Œé¢
   - æˆ–è€…ä½ è‡ªå·±åœ¨Windowsä¸Šæ„å»º

2. **GitHub Actionsçš„è¯¦ç»†é”™è¯¯æ—¥å¿—**
   - å®Œæ•´çš„æ„å»ºæ—¥å¿—
   - è¿è¡Œæ—¶çš„é”™è¯¯ä¿¡æ¯

3. **å®‰è£…ç›®å½•çš„æ–‡ä»¶åˆ—è¡¨**
   - resourcesç›®å½•çš„å†…å®¹
   - backend/node_modulesçš„å†…å®¹

è¿™æ ·æˆ‘ä»¬å°±èƒ½ç²¾ç¡®å®šä½é—®é¢˜ï¼

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### æœ€å¿«çš„è§£å†³æ–¹æ¡ˆ

1. **æ‰¾ä¸€å°Windowsç”µè„‘**ï¼ˆæœ‹å‹çš„ã€å…¬å¸çš„ã€ç½‘å§çš„ï¼‰
2. **å…‹éš†ä»£ç **
3. **è¿è¡Œæ„å»ºå‘½ä»¤**
4. **10åˆ†é’Ÿå†…å¾—åˆ°å¯ç”¨çš„å®‰è£…åŒ…**

### æˆ–è€…

1. **ç»§ç»­è°ƒè¯•GitHub Actions**
2. **æ·»åŠ æ›´å¤šæ—¥å¿—**
3. **æ‰¾å‡ºå…·ä½“çš„å¤±è´¥åŸå› **
4. **ä¿®å¤é…ç½®**

---

**ç»“è®º**ï¼šåœ¨Macä¸Šæ— æ³•æ„å»ºçœŸæ­£å¯ç”¨çš„Windowsç‰ˆæœ¬ã€‚å¿…é¡»åœ¨Windowsç³»ç»Ÿä¸Šæ„å»ºï¼Œæˆ–è€…å½»åº•è°ƒè¯•GitHub Actionsçš„é…ç½®ã€‚

**æ›´æ–°æ—¶é—´**ï¼š2025å¹´11æœˆ5æ—¥ 05:40
**ç‰ˆæœ¬**ï¼šv3.2.0
